'use client';

import { useCallback, useEffect, useState } from 'react';

export function Logo({ className, ...props }: React.ComponentPropsWithoutRef<'svg' | 'img'>) {
	const [data, setData] = useState<{
		id: number;
		name: string;
		organizations: Record<string, string>;
	}>();
	const retrieve = useCallback(() => {
		fetch('/api/organization').then((xhr) => {
			if (xhr.ok) xhr.json().then(setData);
		});
	}, []);

	useEffect(() => {
		retrieve();
	}, []);

	return data?.organizations?.logo_url ? (
		<img
			src={data?.organizations?.logo_url}
			width="auto"
			height={props.height || '32px'}
			className="mx-auto text-center"
		/>
	) : (
		<svg
			width="auto"
			height={props.height || '32px'}
			viewBox="0 0 467.265 404.664"
			version="1.1"
			xmlns="http://www.w3.org/2000/svg"
		>
			<g id="Page-1" stroke="none" strokeWidth="1" fill="currentColor" fillRule="evenodd">
				<g id="STARTUP-AI-CS6" transform="translate(-936.3675, -476.1945)" fill="currentColor">
					<g
						id="Group"
						transform="translate(1170, 678.5265) rotate(90) translate(-1170, -678.5265)translate(967.668, 444.894)"
					>
						<polygon
							id="Clip-4"
							points="66.844 78.223 269.178 195.038 269.178 272.226 202.333 310.819 135.486 272.226 135.486 196.074 169.357 215.629 169.357 252.67 202.333 271.709 235.307 252.67 235.307 214.593 32.974 97.779"
						></polygon>
						<polygon
							id="Clip-7"
							points="134.59 39.111 336.921 155.927 336.921 311.337 202.333 389.043 67.743 311.337 67.743 156.964 101.615 176.519 101.615 291.782 202.333 349.93 303.05 291.781 303.05 175.482 100.718 58.668"
						></polygon>
						<polygon
							id="Clip-10"
							points="202.333 2.91585035e-14 404.664 116.815 404.664 350.449 202.333 467.265 1.13686838e-13 350.449 1.13686838e-13 117.853 33.873 137.408 33.873 330.894 202.333 428.154 370.793 330.893 370.793 136.371 168.46 19.556"
						></polygon>
					</g>
				</g>
			</g>
		</svg>
	);
}
